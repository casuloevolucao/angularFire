<div class="container-fluid">
  <div class="row justify-content-end">
    <button class="btn btn-success large m-3" (click)="createModal(add)"><i class="fa fa-plus" aria-hidden="true"></i> Cadastrar novo</button>
  </div>
  <table class="table table-striped table-bordered row-border hover" datatable [dtTrigger]="dtTrigger" [dtOptions]="dtOptions">
      <thead>
        <tr>
          <th>Id</th>
          <th>Nome</th>
          <th>Idade</th>
          <th>Contato</th>
          <th>Email</th>
          <th>Foto</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let lideres of results">
              <td>{{lideres.id}}</td>
              <td>{{lideres.nome}}</td>
              <td>{{lideres.idade}}</td>
              <td>{{lideres.contato}}</td>
              <td>{{lideres.email}}</td>
            <td>
              <img class="img-fluid rounded-circle" width="80px" height="80px" [src]="lideres.foto" [hidden]="!lideres.foto" alt="{{lideres.nome}}">
            </td>
            <td>
              <button class="btn btn-info m-2" (click)="editModal(edit, lideres)"><i class="fa fa-pencil" aria-hidden="true"></i>Editar</button>
              <button class="btn btn-danger m-2" (click)="delete(lideres)"><i class="fa fa-trash-o" aria-hidden="true"></i> Deletar</button>
            </td>
          </tr>
      </tbody>
    </table>
</div>

<ng-template #edit>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Editar {{form.value.nome}}</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); form.reset()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="form" (ngSubmit)="editar()">
      <div class="form-group has-feedback">
        <label for="Nome">Nome</label>
        <input formControlName="nome" 
        type="text" 
        class="form-control" 
        id="Nome" 
        placeholder="Digite seu nome">

        <div *ngIf="form.get('nome').invalid && (form.get('nome').dirty || form.get('nome').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('nome').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Idade">Idade</label>
        <input formControlName="idade"  
        type="number" 
        class="form-control" 
        id="Idade" 
        placeholder="Digite sua idade">
        <div *ngIf="form.get('idade').invalid && (form.get('idade').dirty || form.get('idade').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('idade').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Foto">Foto</label>
        <input formControlName="foto" type="text" class="form-control" id="Foto" placeholder="Digite a url da foto">
      </div>
      <div class="form-group has-feedback">
        <label for="Contato">Contato</label>
        <input formControlName="contato" 
        type="text" 
        class="form-control" 
        id="Contato" 
        placeholder="Digite seu Whats">
        <div *ngIf="form.get('contato').invalid && (form.get('contato').dirty || form.get('contato').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('contato').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Email">Email</label>
        <input formControlName="email" 
        type="email" 
        class="form-control" 
        id="Email" 
        placeholder="name@example.com">
        <div *ngIf="form.get('email').invalid && (form.get('email').dirty || form.get('email').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('email').hasError('required')">
            campo é Requerido
          </div>
          <div *ngIf="form.get('email').hasError('email')">
            Email inválido
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" (click)="modalRef.hide(); form.reset()">Fechar</button>
        <button class="btn btn-primary" type="submit" [disabled]="!form.valid">Salvar Alterações</button>
      </div>
    </form>
  </div>
  
</ng-template>

<ng-template #add>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Criar novo regitro</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide(); form.reset()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="form" (ngSubmit)="create()">
      <div class="form-group has-feedback">
        <label for="Nome">Nome</label>
        <input formControlName="nome" 
        type="text" 
        class="form-control" 
        id="Nome" 
        placeholder="Digite seu nome">

        <div *ngIf="form.get('nome').invalid && (form.get('nome').dirty || form.get('nome').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('nome').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Idade">Idade</label>
        <input formControlName="idade"  
        type="number" 
        class="form-control" 
        id="Idade" 
        placeholder="Digite sua idade">
        <div *ngIf="form.get('idade').invalid && (form.get('idade').dirty || form.get('idade').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('idade').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Foto">Foto</label>
        <input formControlName="foto" type="text" class="form-control" id="Foto" placeholder="Digite a url da foto">
      </div>
      <div class="form-group has-feedback">
        <label for="Contato">Contato</label>
        <input formControlName="contato" 
        type="text" 
        class="form-control" 
        id="Contato" 
        placeholder="Digite seu Whats">
        <div *ngIf="form.get('contato').invalid && (form.get('contato').dirty || form.get('contato').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('contato').hasError('required')">
            campo é Requerido
          </div>
        </div>
      </div>
      <div class="form-group has-feedback">
        <label for="Email">Email</label>
        <input formControlName="email" 
        type="email" 
        class="form-control" 
        id="Email" 
        placeholder="name@example.com">
        <div *ngIf="form.get('email').invalid && (form.get('email').dirty || form.get('email').touched)"
        class="alert alert-danger">
          <div *ngIf="form.get('email').hasError('required')">
            campo é Requerido
          </div>
          <div *ngIf="form.get('email').hasError('email')">
            Email inválido
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" (click)="modalRef.hide()">Fechar</button>
        <button class="btn btn-primary" type="submit" [disabled]="!form.valid">Salvar Alterações</button>
      </div>
    </form>
  </div>
</ng-template>